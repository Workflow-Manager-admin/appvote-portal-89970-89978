{"is_source_file": true, "format": "JavaScript (React JSX)", "description": "A React component utility for analyzing and repairing broken image URLs stored in a database, specifically targeting potential issues with image URLs belonging to 'apps' in the database, including verifying existence in storage and updating URL formats.", "external_files": ["../config/supabaseClient"], "external_methods": ["supabase.from", "supabase.storage.from", "getImageUrl"], "published": ["ImageRepairTool"], "classes": [], "methods": [{"name": "fetchAllApps", "description": "Fetches all app entries from the 'apps' table, ordered by creation date."}, {"name": "analyzeImages", "description": "Analyzes each app's image URL for correctness and file existence in storage, identifying broken or malformed URLs."}, {"name": "repairImages", "description": "Attempts to repair the URLs of images identified as repairable by updating their database records with corrected URLs."}], "calls": ["supabase.from('apps').select('id, name, image_url')", "supabase.storage.from('app_images').list()", "getImageUrl('app_images', path)", "supabase.from('apps').update({ image_url: img.newUrl }).eq('id', img.id)"], "search-terms": ["ImageRepairTool", "image URL repair", "supabase storage verification", "React image URL checker", "broken image URL fix"], "state": 2, "file_id": 52, "knowledge_revision": 134, "git_revision": "", "ctags": [{"_type": "tag", "name": "ImageRepairTool", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/utils/ImageRepairTool.js", "pattern": "/^const ImageRepairTool = () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "analyzeImages", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/utils/ImageRepairTool.js", "pattern": "/^          onClick={analyzeImages} $/", "language": "JavaScript", "kind": "field", "scope": "onClick", "scopeKind": "class"}, {"_type": "tag", "name": "analyzeImages", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/utils/ImageRepairTool.js", "pattern": "/^  const analyzeImages = async () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "analyzing", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/utils/ImageRepairTool.js", "pattern": "/^          disabled={analyzing || loading || apps.length === 0}$/", "language": "JavaScript", "kind": "field", "scope": "disabled", "scopeKind": "class"}, {"_type": "tag", "name": "broken", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/utils/ImageRepairTool.js", "pattern": "/^    const broken = [];$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "fetchAllApps", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/utils/ImageRepairTool.js", "pattern": "/^  const fetchAllApps = async () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "fileInStorage", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/utils/ImageRepairTool.js", "pattern": "/^          const fileInStorage = fileExists.some(f => f.name === fileName);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "fileName", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/utils/ImageRepairTool.js", "pattern": "/^          const fileName = path.split('\\/').pop();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "img", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/utils/ImageRepairTool.js", "pattern": "/^        const img = toRepair[i];$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "match", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/utils/ImageRepairTool.js", "pattern": "/^            const match = app.image_url.match(\\/app_images\\\\\\/([^?]+)\\/);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "newUrl", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/utils/ImageRepairTool.js", "pattern": "/^          const newUrl = getImageUrl('app_images', path);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "path", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/utils/ImageRepairTool.js", "pattern": "/^          let path = null;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "repairImages", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/utils/ImageRepairTool.js", "pattern": "/^  const repairImages = async () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "results", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/utils/ImageRepairTool.js", "pattern": "/^    const results = [];$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setAnalyzing", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/utils/ImageRepairTool.js", "pattern": "/^  const [analyzing, setAnalyzing] = useState(false);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setApps", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/utils/ImageRepairTool.js", "pattern": "/^  const [apps, setApps] = useState([]);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setBrokenImages", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/utils/ImageRepairTool.js", "pattern": "/^  const [brokenImages, setBrokenImages] = useState([]);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setLoading", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/utils/ImageRepairTool.js", "pattern": "/^  const [loading, setLoading] = useState(false);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setRepairComplete", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/utils/ImageRepairTool.js", "pattern": "/^  const [repairComplete, setRepairComplete] = useState(false);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setRepairStatus", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/utils/ImageRepairTool.js", "pattern": "/^  const [repairStatus, setRepairStatus] = useState(null);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "toRepair", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/utils/ImageRepairTool.js", "pattern": "/^      const toRepair = brokenImages.filter(img => img.repairable);$/", "language": "JavaScript", "kind": "constant"}], "filename": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/utils/ImageRepairTool.js", "hash": "a497f5185f0ffebb6e89b68db20eb33d", "format-version": 4, "code-base-name": "default", "fields": [{"name": "onClick={analyzeImages}", "scope": "onClick", "scopeKind": "class", "description": "unavailable"}, {"name": "disabled={analyzing || loading || apps.length === 0}", "scope": "disabled", "scopeKind": "class", "description": "unavailable"}, {"name": "let path = null;", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"134": ""}]}