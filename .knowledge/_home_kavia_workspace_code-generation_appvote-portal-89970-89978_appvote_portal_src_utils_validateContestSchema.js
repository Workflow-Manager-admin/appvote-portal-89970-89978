{"is_source_file": true, "format": "JavaScript", "description": "This file provides utility functions to validate and fix the schema of the contest-related database tables in a project. It includes schema checks, creation of missing tables and columns, inserting initial data, and setting up RLS policies.", "external_files": ["../config/supabaseClient"], "external_methods": ["supabase.from", "supabase.rpc"], "published": ["validateContestSchema", "fixContestSchemaIssues"], "classes": [], "methods": [{"name": "validateContestSchema", "description": "Performs comprehensive checks on the presence and structure of contest-related database tables and columns, returning validation results."}, {"name": "fixContestSchemaIssues", "description": "Attempts to fix identified schema issues by creating missing tables, adding columns, inserting initial data, and configuring security policies."}], "calls": ["supabase.from('contest_weeks')", "supabase.from('contest_winners')", "supabase.from('apps')", "supabase.from('votes')", "supabase.rpc('execute_sql', { query: ... })", "supabase.from('contest_weeks').insert([...])", "supabase.rpc('execute_sql', { query: ... })"], "search-terms": ["validateContestSchema", "fixContestSchemaIssues", "contest_weeks", "contest_winners", "schema validation", "schema fixing", "RLS policies", "contest schema management"], "state": 2, "file_id": 86, "knowledge_revision": 298, "git_revision": "1f9ba2e319e89cfa9ef27edc60ed1ed60c9de46c", "ctags": [{"_type": "tag", "name": "columns", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/utils/validateContestSchema.js", "pattern": "/^    columns: {},$/", "language": "JavaScript", "kind": "property", "scope": "results", "scopeKind": "class"}, {"_type": "tag", "name": "data", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/utils/validateContestSchema.js", "pattern": "/^    data: {},$/", "language": "JavaScript", "kind": "property", "scope": "results", "scopeKind": "class"}, {"_type": "tag", "name": "fixContestSchemaIssues", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/utils/validateContestSchema.js", "pattern": "/^const fixContestSchemaIssues = async (validationResults) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "issues", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/utils/validateContestSchema.js", "pattern": "/^    issues: [],$/", "language": "JavaScript", "kind": "property", "scope": "results", "scopeKind": "class"}, {"_type": "tag", "name": "operations", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/utils/validateContestSchema.js", "pattern": "/^    operations: [],$/", "language": "JavaScript", "kind": "property", "scope": "results", "scopeKind": "class"}, {"_type": "tag", "name": "results", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/utils/validateContestSchema.js", "pattern": "/^  const results = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "success", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/utils/validateContestSchema.js", "pattern": "/^    success: true$/", "language": "JavaScript", "kind": "property", "scope": "results", "scopeKind": "class"}, {"_type": "tag", "name": "tables", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/utils/validateContestSchema.js", "pattern": "/^    tables: {},$/", "language": "JavaScript", "kind": "property", "scope": "results", "scopeKind": "class"}, {"_type": "tag", "name": "validateContestSchema", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/utils/validateContestSchema.js", "pattern": "/^const validateContestSchema = async () => {$/", "language": "JavaScript", "kind": "constant"}], "filename": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/utils/validateContestSchema.js", "hash": "b3115175f5cf576447621f20bcf46bc0", "format-version": 4, "code-base-name": "default", "fields": [{"name": "columns: {},", "scope": "results", "scopeKind": "class", "description": "unavailable"}, {"name": "data: {},", "scope": "results", "scopeKind": "class", "description": "unavailable"}, {"name": "issues: [],", "scope": "results", "scopeKind": "class", "description": "unavailable"}, {"name": "operations: [],", "scope": "results", "scopeKind": "class", "description": "unavailable"}, {"name": "success: true", "scope": "results", "scopeKind": "class", "description": "unavailable"}, {"name": "tables: {},", "scope": "results", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"298": "1f9ba2e319e89cfa9ef27edc60ed1ed60c9de46c"}]}