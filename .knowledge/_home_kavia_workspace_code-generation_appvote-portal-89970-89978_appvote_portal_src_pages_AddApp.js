{"is_source_file": true, "format": "JavaScript (React JSX)", "description": "This file defines a React functional component 'AddApp' that provides a form for users to submit details about an app, including uploading an image, and handles submission logic with validation, image upload to Supabase storage, and database insertion.", "external_files": ["../contexts/AuthContext", "../contexts/ContestContext", "../config/supabaseClient"], "external_methods": ["useAuth", "useContest", "supabase.storage.from", "getImageUrl", "toast.error", "toast.success", "useNavigate", "register", "handleSubmit"], "published": ["AddApp"], "classes": [], "methods": [{"name": "handleImageChange", "description": "Handles the user's image file selection, performs validation on file type and size, and sets the image preview URL."}, {"name": "onSubmit", "description": "Handles form submission, including user validation, contest state validation, image upload to Supabase, database insertion, and navigation upon success."}], "calls": ["useState", "useNavigate", "useForm", "toast.error", "toast.success", "URL.createObjectURL", "supabase.storage.from", "supabase.storage.from().upload", "getImageUrl", "supabase.from", "supabase.from().insert", "console.log", "console.error", "setLoading", "navigate"], "search-terms": ["AddApp React form", "image upload React", "Supabase upload", "React hook-form", "app submission", "React Toastify"], "state": 2, "file_id": 30, "knowledge_revision": 256, "git_revision": "4e30a41ea1407cd3e8d368a9b91e70e69f59fd81", "revision_history": [{"61": ""}, {"87": ""}, {"91": ""}, {"118": ""}, {"129": ""}, {"130": ""}, {"216": "d3e2c78b02e1d081abb18a85891422c2b2df5156"}, {"217": "d3e2c78b02e1d081abb18a85891422c2b2df5156"}, {"225": "d3e2c78b02e1d081abb18a85891422c2b2df5156"}, {"255": "62643f4f40f4ac559dcd3fb117d1c7b3829b3b48"}, {"256": "4e30a41ea1407cd3e8d368a9b91e70e69f59fd81"}], "ctags": [{"_type": "tag", "name": "AddApp", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^const AddApp = () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "errors", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^              className={errors.image ? 'input-error' : ''}$/", "language": "JavaScript", "kind": "field", "scope": "className", "scopeKind": "class"}, {"_type": "tag", "name": "errors", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^              className={errors.link ? 'input-error' : ''}$/", "language": "JavaScript", "kind": "field", "scope": "className", "scopeKind": "class"}, {"_type": "tag", "name": "errors", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^              className={errors.name ? 'input-error' : ''}$/", "language": "JavaScript", "kind": "field", "scope": "className", "scopeKind": "class"}, {"_type": "tag", "name": "file", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^    const file = e.target.files[0];$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "fileExt", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^          const fileExt = imageFile.name.split('.').pop();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "fileName", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^          const fileName = `${uuidv4()}.${fileExt}`;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "filePath", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^          const filePath = `${user.id}\\/${fileName}`;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "handleImageChange", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^              onChange={handleImageChange}$/", "language": "JavaScript", "kind": "field", "scope": "onChange", "scopeKind": "class"}, {"_type": "tag", "name": "handleImageChange", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^  const handleImageChange = (e) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "imageFile", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^      const imageFile = data.image[0];$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "imageUrl", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^      let imageUrl = null;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "loading", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^            disabled={loading}$/", "language": "JavaScript", "kind": "field", "scope": "disabled", "scopeKind": "class"}, {"_type": "tag", "name": "navigate", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^  const navigate = useNavigate();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "onSubmit", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^  const onSubmit = async (data) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "previewUrl", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^    const previewUrl = URL.createObjectURL(file);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "publicUrl", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^          const publicUrl = getImageUrl('app_images', filePath);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setImagePreview", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^  const [imagePreview, setImagePreview] = useState(null);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setLoading", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^  const [loading, setLoading] = useState(false);$/", "language": "JavaScript", "kind": "constant"}], "filename": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "hash": "613c6db8927749aecd882ba2d8525d7f", "format-version": 4, "code-base-name": "default", "fields": [{"name": "className={errors.image ? 'input-error' : ''}", "scope": "className", "scopeKind": "class", "description": "unavailable"}, {"name": "className={errors.link ? 'input-error' : ''}", "scope": "className", "scopeKind": "class", "description": "unavailable"}, {"name": "className={errors.name ? 'input-error' : ''}", "scope": "className", "scopeKind": "class", "description": "unavailable"}, {"name": "onChange={handleImageChange}", "scope": "onChange", "scopeKind": "class", "description": "unavailable"}, {"name": "let imageUrl = null;", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "disabled={loading}", "scope": "disabled", "scopeKind": "class", "description": "unavailable"}]}