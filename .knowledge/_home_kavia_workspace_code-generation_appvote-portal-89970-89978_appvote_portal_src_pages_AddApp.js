{"is_source_file": true, "format": "JavaScript (React.js)", "description": "This is a React component named AddApp used for submitting a new application, including app name, URL, and an optional screenshot image. It handles form validation, image upload to Supabase storage, and data submission to the database.", "external_files": ["../contexts/AuthContext", "../config/supabaseClient"], "external_methods": ["useState", "useNavigate", "useForm", "toast.error", "toast.success", "supabase.storage.from", "getImageUrl"], "published": ["AddApp"], "classes": [], "methods": [{"name": "handleImageChange", "description": "Handles image file selection, validates the file type and size, and creates a preview URL for display."}, {"name": "onSubmit", "description": "Handles the form submission, uploads the image to Supabase storage if provided, saves app data to the database, and manages navigation and error handling."}], "calls": ["useForm()", "useState()", "useAuth()", "useNavigate()", "toast.error()", "toast.success()", "supabase.storage.from().upload()", "getImageUrl()", "supabase.from().insert()", "console.log()", "console.error()"], "search-terms": ["AddApp React component", "Supabase image upload", "React form validation", "React hooks authentication", "React toast notifications"], "state": 2, "file_id": 30, "knowledge_revision": 130, "git_revision": "", "revision_history": [{"61": ""}, {"87": ""}, {"91": ""}, {"118": ""}, {"129": ""}, {"130": ""}], "ctags": [{"_type": "tag", "name": "AddApp", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^const AddApp = () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "errors", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^              className={errors.image ? 'input-error' : ''}$/", "language": "JavaScript", "kind": "field", "scope": "className", "scopeKind": "class"}, {"_type": "tag", "name": "errors", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^              className={errors.link ? 'input-error' : ''}$/", "language": "JavaScript", "kind": "field", "scope": "className", "scopeKind": "class"}, {"_type": "tag", "name": "errors", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^              className={errors.name ? 'input-error' : ''}$/", "language": "JavaScript", "kind": "field", "scope": "className", "scopeKind": "class"}, {"_type": "tag", "name": "file", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^    const file = e.target.files[0];$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "fileExt", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^          const fileExt = imageFile.name.split('.').pop();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "fileName", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^          const fileName = `${uuidv4()}.${fileExt}`;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "filePath", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^          const filePath = `${user.id}\\/${fileName}`;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "handleImageChange", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^              onChange={handleImageChange}$/", "language": "JavaScript", "kind": "field", "scope": "onChange", "scopeKind": "class"}, {"_type": "tag", "name": "handleImageChange", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^  const handleImageChange = (e) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "imageFile", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^      const imageFile = data.image[0];$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "imageUrl", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^      let imageUrl = null;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "loading", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^            disabled={loading}$/", "language": "JavaScript", "kind": "field", "scope": "disabled", "scopeKind": "class"}, {"_type": "tag", "name": "navigate", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^  const navigate = useNavigate();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "onSubmit", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^  const onSubmit = async (data) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "previewUrl", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^    const previewUrl = URL.createObjectURL(file);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "publicUrl", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^          const publicUrl = getImageUrl('app_images', filePath);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setImagePreview", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^  const [imagePreview, setImagePreview] = useState(null);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setLoading", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^  const [loading, setLoading] = useState(false);$/", "language": "JavaScript", "kind": "constant"}], "filename": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "hash": "9412d037966f5b72fec5a10b55fe0a13", "format-version": 4, "code-base-name": "default", "fields": [{"name": "className={errors.image ? 'input-error' : ''}", "scope": "className", "scopeKind": "class", "description": "unavailable"}, {"name": "className={errors.link ? 'input-error' : ''}", "scope": "className", "scopeKind": "class", "description": "unavailable"}, {"name": "className={errors.name ? 'input-error' : ''}", "scope": "className", "scopeKind": "class", "description": "unavailable"}, {"name": "onChange={handleImageChange}", "scope": "onChange", "scopeKind": "class", "description": "unavailable"}, {"name": "let imageUrl = null;", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "disabled={loading}", "scope": "disabled", "scopeKind": "class", "description": "unavailable"}]}