{"is_source_file": true, "format": "JavaScript (React JSX)", "description": "This file defines the React component 'AddApp' which provides a form allowing users to submit an app with its name, URL, and screenshot/image upload. It handles image preview, validation, and uploads images to Supabase storage, then saves app data to the database, with navigation and contest status considerations.", "external_files": ["../contexts/AuthContext", "../contexts/ContestContext", "../config/supabaseClient"], "external_methods": ["useAuth", "useContest", "getImageUrl", "supabase.storage.from('app_images').upload"], "published": ["AddApp"], "classes": [], "methods": [{"name": "handleImageChange", "description": "Handles user selection of image files, validates file type and size, and creates an image preview."}, {"name": "onSubmit", "description": "Handles the form submission, uploads the image to Supabase storage if provided, then inserts the app data into the database, with error handling and loader management."}], "calls": ["useForm", "useState", "useAuth", "useContest", "useNavigate", "URL.createObjectURL", "toast.error", "supabase.storage.from('app_images').upload", "getImageUrl", "supabase.from('apps').insert", "toast.success", "navigate"], "search-terms": ["React useForm", "Supabase image upload", "App submission form", "React toast notifications", "Image preview in React", "Contests and submission logic"], "state": 2, "file_id": 30, "knowledge_revision": 258, "git_revision": "6d908dfe4e89aa2bf5fbd420e767c0684dfcab78", "revision_history": [{"61": ""}, {"87": ""}, {"91": ""}, {"118": ""}, {"129": ""}, {"130": ""}, {"216": "d3e2c78b02e1d081abb18a85891422c2b2df5156"}, {"217": "d3e2c78b02e1d081abb18a85891422c2b2df5156"}, {"225": "d3e2c78b02e1d081abb18a85891422c2b2df5156"}, {"255": "62643f4f40f4ac559dcd3fb117d1c7b3829b3b48"}, {"256": "4e30a41ea1407cd3e8d368a9b91e70e69f59fd81"}, {"257": "002ca7d827ce134730d3e068d39eedba7c01c117"}, {"258": "6d908dfe4e89aa2bf5fbd420e767c0684dfcab78"}], "ctags": [{"_type": "tag", "name": "AddApp", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^const AddApp = () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "errors", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^              className={errors.image ? 'input-error' : ''}$/", "language": "JavaScript", "kind": "field", "scope": "className", "scopeKind": "class"}, {"_type": "tag", "name": "errors", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^              className={errors.link ? 'input-error' : ''}$/", "language": "JavaScript", "kind": "field", "scope": "className", "scopeKind": "class"}, {"_type": "tag", "name": "errors", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^              className={errors.name ? 'input-error' : ''}$/", "language": "JavaScript", "kind": "field", "scope": "className", "scopeKind": "class"}, {"_type": "tag", "name": "file", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^    const file = e.target.files[0];$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "fileExt", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^          const fileExt = imageFile.name.split('.').pop();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "fileName", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^          const fileName = `${uuidv4()}.${fileExt}`;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "filePath", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^          const filePath = `${user.id}\\/${fileName}`;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "handleImageChange", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^              onChange={handleImageChange}$/", "language": "JavaScript", "kind": "field", "scope": "onChange", "scopeKind": "class"}, {"_type": "tag", "name": "handleImageChange", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^  const handleImageChange = (e) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "imageFile", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^      const imageFile = data.image[0];$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "imageUrl", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^      let imageUrl = null;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "loading", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^            disabled={loading || !canSubmitApps()}$/", "language": "JavaScript", "kind": "field", "scope": "disabled", "scopeKind": "class"}, {"_type": "tag", "name": "navigate", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^  const navigate = useNavigate();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "onSubmit", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^  const onSubmit = async (data) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "previewUrl", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^    const previewUrl = URL.createObjectURL(file);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "publicUrl", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^          const publicUrl = getImageUrl('app_images', filePath);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setImagePreview", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^  const [imagePreview, setImagePreview] = useState(null);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setLoading", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "pattern": "/^  const [loading, setLoading] = useState(false);$/", "language": "JavaScript", "kind": "constant"}], "filename": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AddApp.js", "hash": "6f046d14f8282e13a90872c2038c062a", "format-version": 4, "code-base-name": "default", "fields": [{"name": "className={errors.image ? 'input-error' : ''}", "scope": "className", "scopeKind": "class", "description": "unavailable"}, {"name": "className={errors.link ? 'input-error' : ''}", "scope": "className", "scopeKind": "class", "description": "unavailable"}, {"name": "className={errors.name ? 'input-error' : ''}", "scope": "className", "scopeKind": "class", "description": "unavailable"}, {"name": "onChange={handleImageChange}", "scope": "onChange", "scopeKind": "class", "description": "unavailable"}, {"name": "let imageUrl = null;", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "disabled={loading || !canSubmitApps()}", "scope": "disabled", "scopeKind": "class", "description": "unavailable"}]}