{"is_source_file": true, "format": "JavaScript (React/JSX)", "description": "This file defines a React functional component named 'Home' that displays a list of applications fetched from a Supabase database, allows users to vote for up to five apps, and handles user authentication context. It includes functions for fetching apps, user votes, and user profile, as well as vote toggling logic and rendering UI components.", "external_files": ["../contexts/AuthContext", "../config/supabaseClient"], "external_methods": ["useAuth", "supabase.from", "getImageUrl", "toast.error", "toast.success"], "published": ["Home"], "classes": [], "methods": [{"name": "fetchUserVotes", "description": "Fetches the list of app IDs that the current user has voted for from the 'votes' table."}, {"name": "fetchUserProfile", "description": "Fetches the current user's profile data from the 'profiles' table."}, {"name": "fetchApps", "description": "Fetches the list of applications from the 'apps' table, including related profile info, sorted by creation date."}, {"name": "handleVote", "description": "Handles voting logic, adding or removing a vote for a specified app ID, with UI updates and vote limit enforcement."}, {"name": "isOwnApp", "description": "Determines if a given app was submitted by the current user."}], "calls": ["supabase.from('votes').select('app_id').eq('user_id', user.id)", "supabase.from('profiles').select('*').eq('id', user.id).single()", "supabase.from('apps').select(...)", "supabase.from('votes').delete().eq('user_id', user.id).eq('app_id', appId)", "supabase.from('votes').insert([{ user_id: user.id, app_id: appId }])"], "search-terms": ["React Home component", "Votes management", "Supabase integration", "Application list", "Voting system", "User profile fetch", "App submission"], "state": 2, "file_id": 27, "knowledge_revision": 226, "git_revision": "d3e2c78b02e1d081abb18a85891422c2b2df5156", "revision_history": [{"55": ""}, {"119": ""}, {"127": ""}, {"128": ""}, {"219": "d3e2c78b02e1d081abb18a85891422c2b2df5156"}, {"220": "d3e2c78b02e1d081abb18a85891422c2b2df5156"}, {"221": "d3e2c78b02e1d081abb18a85891422c2b2df5156"}, {"226": "d3e2c78b02e1d081abb18a85891422c2b2df5156"}], "ctags": [{"_type": "tag", "name": "Home", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/Home.js", "pattern": "/^const Home = () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "fetchApps", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/Home.js", "pattern": "/^  const fetchApps = useCallback(async () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "fetchUserProfile", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/Home.js", "pattern": "/^  const fetchUserProfile = useCallback(async () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "fetchUserVotes", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/Home.js", "pattern": "/^  const fetchUserVotes = useCallback(async () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "handleVote", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/Home.js", "pattern": "/^  const handleVote = async (appId) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "isOwnApp", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/Home.js", "pattern": "/^  const isOwnApp = (appUserId) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setApps", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/Home.js", "pattern": "/^  const [apps, setApps] = useState([]);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setLoading", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/Home.js", "pattern": "/^  const [loading, setLoading] = useState(true);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setUserVotes", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/Home.js", "pattern": "/^  const [userVotes, setUserVotes] = useState([]);$/", "language": "JavaScript", "kind": "constant"}], "filename": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/Home.js", "hash": "b599708a6dea9b923a65e3a717acf02c", "format-version": 4, "code-base-name": "default"}