{"is_source_file": true, "format": "JavaScript/React", "description": "This file defines a React functional component for the Home page of a contest voting app. It manages fetching and displaying apps submitted for a contest week, handles user votes, and displays contest status details. It utilizes React hooks, context providers, and interacts with a Supabase backend to load data and perform voting actions.", "external_files": ["../contexts/AuthContext", "../contexts/ContestContext", "../config/supabaseClient"], "external_methods": ["useAuth", "useContest", "supabase.from", "getImageUrl", "toast", "useState", "useEffect", "useCallback"], "published": ["Home"], "classes": [], "methods": [{"name": "fetchUserVotes", "description": "Fetches the current user's votes for apps, optionally filtering by the selected contest week. Handles errors related to missing columns."}, {"name": "fetchUserProfile", "description": "Fetches the current user's profile data from the database."}, {"name": "fetchApps", "description": "Loads the list of submitted apps, filtered by contest week if applicable, with fallback for schema errors."}, {"name": "handleVote", "description": "Handles voting and vote removal logic, including checks for maximum votes, voting rights, and schema issues."}, {"name": "isOwnApp", "description": "Checks if the app was submitted by the current user."}, {"name": "handleWeekChange", "description": "Updates selected contest week and triggers data reload."}], "calls": ["useAuth()", "useContest()", "supabase.from()", "getImageUrl()", "toast.error()", "toast.success()", "setApps()", "setUserVotes()", "setLoading()", "setSelectedWeekId()", "fetchApps()", "fetchUserVotes()", "fetchUserProfile()", "switchWeek()", "getAllWeeks()"], "search-terms": ["React contest voting", "Supabase vote mechanism", "App submission display", "Contest week filtering", "Vote management", "Schema error handling", "User profile fetch"], "state": 2, "file_id": 27, "knowledge_revision": 324, "git_revision": "ea9edfee75ced64ef5e468e918039160f5e532f4", "revision_history": [{"55": ""}, {"119": ""}, {"127": ""}, {"128": ""}, {"219": "d3e2c78b02e1d081abb18a85891422c2b2df5156"}, {"220": "d3e2c78b02e1d081abb18a85891422c2b2df5156"}, {"221": "d3e2c78b02e1d081abb18a85891422c2b2df5156"}, {"226": "d3e2c78b02e1d081abb18a85891422c2b2df5156"}, {"249": "b37b1bd7f4861a93dda18b7f5d378be1ea1f4596"}, {"250": "0946da5be93d61a170bf1b461e004bf85a1c6004"}, {"251": "77072cf68e0ec2e2b72ce7a800b4e4c558ae7871"}, {"252": "77072cf68e0ec2e2b72ce7a800b4e4c558ae7871"}, {"253": "a7815c38ca0bd220c75da88d0fe1d69e68e7ae4b"}, {"254": "91bc9836326eb2656f4461650fcc1c789b02fa1c"}, {"271": "2891499db4720fcba7d667a51adf80c8fb386e86"}, {"273": "ad60d7e0a5f2eec92cca11c726fb7714a8ced625"}, {"274": "f3a71f7dc5413c180095964725527f1874350b68"}, {"291": "5f476d6f1f59d5cf8f768aa9f88a602d82e07398"}, {"292": "dc80a1dc966a690837eaa5ba003f08793dbaa904"}, {"293": "dc80a1dc966a690837eaa5ba003f08793dbaa904"}, {"294": "a42c02403e65d456a204bfacfde30fcef0199caa"}, {"295": "98080b46aed98ea30fa7e2bb8fcd58059514d9f7"}, {"321": "a3a4f6ed05feeef66086107773758f1fcc464726"}, {"322": "800b1648ca4dc84c979e6dd6e48d7e17549848f3"}, {"323": "ea9edfee75ced64ef5e468e918039160f5e532f4"}, {"324": "ea9edfee75ced64ef5e468e918039160f5e532f4"}], "ctags": [{"_type": "tag", "name": "Home", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/Home.js", "pattern": "/^const Home = () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "allWeeks", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/Home.js", "pattern": "/^  const allWeeks = getAllWeeks();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "app_id", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/Home.js", "pattern": "/^          app_id: appId$/", "language": "JavaScript", "kind": "property", "scope": "voteData", "scopeKind": "class"}, {"_type": "tag", "name": "fetchApps", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/Home.js", "pattern": "/^  const fetchApps = useCallback(async () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "fetchUserProfile", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/Home.js", "pattern": "/^  const fetchUserProfile = useCallback(async () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "fetchUserVotes", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/Home.js", "pattern": "/^  const fetchUserVotes = useCallback(async () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "handleVote", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/Home.js", "pattern": "/^  const handleVote = async (appId) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "handleWeekChange", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/Home.js", "pattern": "/^  const handleWeekChange = (weekId) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "isOwnApp", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/Home.js", "pattern": "/^  const isOwnApp = (appUserId) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "query", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/Home.js", "pattern": "/^        let query = supabase$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "setApps", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/Home.js", "pattern": "/^  const [apps, setApps] = useState([]);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setLoading", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/Home.js", "pattern": "/^  const [loading, setLoading] = useState(true);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setSelectedWeekId", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/Home.js", "pattern": "/^  const [selectedWeekId, setSelectedWeekId] = useState(null);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setUserVotes", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/Home.js", "pattern": "/^  const [userVotes, setUserVotes] = useState([]);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "user_id", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/Home.js", "pattern": "/^          user_id: user.id, $/", "language": "JavaScript", "kind": "property", "scope": "voteData", "scopeKind": "class"}, {"_type": "tag", "name": "voteData", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/Home.js", "pattern": "/^        const voteData = { $/", "language": "JavaScript", "kind": "class"}], "filename": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/Home.js", "hash": "7fec5d720f6dad9d8097cf701d6970ce", "format-version": 4, "code-base-name": "default", "fields": [{"name": "app_id: appId", "scope": "voteData", "scopeKind": "class", "description": "unavailable"}, {"name": "let query = supabase", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "user_id: user.id,", "scope": "voteData", "scopeKind": "class", "description": "unavailable"}]}