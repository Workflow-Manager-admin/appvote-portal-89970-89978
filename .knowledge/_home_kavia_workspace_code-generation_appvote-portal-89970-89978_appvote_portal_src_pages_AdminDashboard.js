{"is_source_file": true, "format": "JavaScript React component (JSX)", "description": "This file defines the AdminDashboard React component, which manages the admin interface for a contest voting platform. It handles fetching application data, contest management (start/end, winner selection), generating shareable top 10 lists, exporting data to CSV, and rendering the admin UI including tabs, contest weeks, and app submissions.", "external_files": ["../contexts/AuthContext", "../contexts/ContestContext", "../config/supabaseClient", "../utils/ImageRepairTool"], "external_methods": ["useAuth()", "useContest()", "supabase.from()", "toast.error()", "toast.success()"], "published": ["AdminDashboard"], "classes": [], "methods": [{"name": "fetchApps", "description": "Fetches application submissions from the database for a specific week, including user profiles and vote counts, then sorts and processes them for display."}, {"name": "generateShareableLink", "description": "Generates a shareable text containing the top 10 apps with their ranks, names, links, and votes, for sharing via modal."}, {"name": "copyToClipboard", "description": "Copies the generated share text to the user's clipboard."}, {"name": "exportToCsv", "description": "Exports the current list of apps with their details and votes to a CSV file for download."}, {"name": "handleWeekChange", "description": "Handles changing the currently selected contest week, updating state and fetching relevant data."}, {"name": "handleStatusChange", "description": "Starts or ends the contest for a given week by updating its status in the database."}, {"name": "handleSelectWinner", "description": "Assigns a selected app as the winner for a particular position (1st, 2nd, or 3rd) in the contest."}, {"name": "getCurrentWeekStatus", "description": "Retrieves the current status ('active', 'ended', 'completed', etc.) of the selected contest week."}], "calls": ["supabase.from('apps').select(...)", "supabase.from('profiles').select(...)", "toast.error()", "toast.success()", "setApps()", "setLoading()", "setShareUrl()", "setShowShareModal()", "setSelectedTab()", "switchWeek()", "updateContestStatus()", "selectWinner()", "getWinnersForWeek()"], "search-terms": ["AdminDashboard", "React", "Supabase", "Vote counting", "Contest management", "Shared list", "CSV export", "Top 10 apps", "Winner selection"], "state": 2, "file_id": 31, "knowledge_revision": 281, "git_revision": "7056976a3f45a8334c0dc1ba5d84934dc5b8ef43", "revision_history": [{"63": ""}, {"135": ""}, {"136": ""}, {"218": "d3e2c78b02e1d081abb18a85891422c2b2df5156"}, {"236": "da1c2085752a9645490581c288e912167582a7c9"}, {"237": "886a44c047ebd285dbc71a32e573e86490821d05"}, {"259": "d75af6a0dbc54426d8604e8beef2c630f55288c4"}, {"260": "63db215c3867e8276414f0b2ef57c283a69455ca"}, {"261": "699c4cb81b52f5d344fd1003840cc79ab36c43b6"}, {"262": "699c4cb81b52f5d344fd1003840cc79ab36c43b6"}, {"263": "f4c8a84ad31f8864cd23ae142256e62cc1628c32"}, {"278": "5cb0065abc36f28c0a3d2dd5680368a4f2113b61"}, {"279": "5d9908d829bc1bfa0e64d89e9c64b1159b196eab"}, {"280": "092847d0fedbc5fd21c153b19b1bba57778d3f6b"}, {"281": "7056976a3f45a8334c0dc1ba5d84934dc5b8ef43"}], "ctags": [{"_type": "tag", "name": "AdminDashboard", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^const AdminDashboard = () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "admin-tab ${selectedTab === 'apps' ? 'active' : ''}", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^          className={`admin-tab ${selectedTab === 'apps' ? 'active' : ''}`}$/", "language": "JavaScript", "kind": "field", "scope": "className", "scopeKind": "class"}, {"_type": "tag", "name": "blob", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^    const blob = new Blob([csvContent], { type: 'text\\/csv;charset=utf-8;' });$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^    const content = top10Apps.map(app => $/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "copyToClipboard", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^  const copyToClipboard = () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "csvContent", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^    const csvContent = [$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "csvHeader", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^    const csvHeader = ['Rank', 'App Name', 'App Link', 'Username', 'Email', 'Registration Number/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "csvRows", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^    const csvRows = apps.map(app => [$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "exportToCsv", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^  const exportToCsv = () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "fetchApps", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^  const fetchApps = async (weekId = selectedWeekId) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "generateShareableLink", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^  const generateShareableLink = () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "getCurrentWeekStatus", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^  const getCurrentWeekStatus = () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "handleSelectWinner", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^  const handleSelectWinner = async (appId, position) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "handleStatusChange", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^  const handleStatusChange = async (weekId, newStatus) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "handleWeekChange", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^  const handleWeekChange = (weekId) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "link", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^    const link = document.createElement('a');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "processedApps", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^      const processedApps = appsData.map(app => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "profilesMap", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^      const profilesMap = {};$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "query", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^      let query = supabase$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "setApps", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^  const [apps, setApps] = useState([]);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setLoading", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^  const [loading, setLoading] = useState(true);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setSelectedTab", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^  const [selectedTab, setSelectedTab] = useState('apps');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setSelectedWeekId", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^  const [selectedWeekId, setSelectedWeekId] = useState(null);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setShareUrl", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^  const [shareUrl, setShareUrl] = useState('');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setShowShareModal", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^  const [showShareModal, setShowShareModal] = useState(false);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "shareText", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^    const shareText = `\ud83d\udcf1 Top 10 Apps from AppVote Portal \ud83d\udcf1\\\\n\\\\n${content}\\\\n\\\\nShared fro/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "success", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^    const success = await updateContestStatus(weekId, newStatus);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "top10Apps", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^    const top10Apps = apps.slice(0, 10);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^    const url = URL.createObjectURL(blob);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "userIds", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^      const userIds = appsData.map(app => app.user_id);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "week", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^    const week = contestWeeks.find(w => w.id === selectedWeekId);$/", "language": "JavaScript", "kind": "constant"}], "filename": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "hash": "cc2b02be9f620e1f87a8fd5e38e2c150", "format-version": 4, "code-base-name": "default", "fields": [{"name": "className={`admin-tab ${selectedTab === 'apps' ? 'active' : ''}`}", "scope": "className", "scopeKind": "class", "description": "unavailable"}, {"name": "let query = supabase", "scope": "", "scopeKind": "", "description": "unavailable"}]}