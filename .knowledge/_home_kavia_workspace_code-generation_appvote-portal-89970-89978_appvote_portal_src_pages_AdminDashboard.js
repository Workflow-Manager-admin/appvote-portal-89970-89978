{"is_source_file": true, "format": "JavaScript React JSX", "description": "This file defines the 'AdminDashboard' component for a React-based web application. It manages the admin interface for viewing app submissions, contest management, winner selection, and generating shareable reports. The component interacts with external services via supabase, handles user permissions, and renders a UI with various controls and data tables.", "external_files": ["../contexts/AuthContext", "../contexts/ContestContext", "../config/supabaseClient", "../utils/ImageRepairTool"], "external_methods": ["useAuth()", "useContest()", "supabase.from", "toast.error", "toast.success"], "published": ["AdminDashboard"], "classes": [], "methods": [{"name": "fetchApps", "description": "Fetches application data from the 'apps' table, along with user profiles, processes votes, and sorts applications based on votes."}, {"name": "generateShareableLink", "description": "Generates a formatted shareable string of the top 10 apps with votes, intended for copying or sharing."}, {"name": "copyToClipboard", "description": "Copies the share URL or text to the system clipboard."}, {"name": "exportToCsv", "description": "Exports the current apps data into a CSV file and triggers a download."}, {"name": "handleWeekChange", "description": "Updates selected contest week and fetches associated applications."}, {"name": "handleStatusChange", "description": "Updates the contest status for a specific week."}, {"name": "handleSelectWinner", "description": "Assigns selected applications as winners for specific positions in the contest."}, {"name": "getCurrentWeekStatus", "description": "Retrieves the current status of the selected contest week."}], "calls": ["supabase.from('apps').select(...)", "supabase.from('profiles').select(...)", "setApps(processedApps)", "toast.error", "toast.success", "switchWeek", "updateContestStatus", "selectWinner", "getWinnersForWeek", "useEffect(...)", "generateShareableLink()", "copyToClipboard()", "exportToCsv()", "fetchApps()"], "search-terms": ["AdminDashboard", "React", "supabase", "app submissions", "contest management", "winners", "vote counting", "CSV export", "share top 10"], "state": 2, "file_id": 31, "knowledge_revision": 318, "git_revision": "23a5be638f3c23fa35712d669ed88cd68a36fa51", "revision_history": [{"63": ""}, {"135": ""}, {"136": ""}, {"218": "d3e2c78b02e1d081abb18a85891422c2b2df5156"}, {"236": "da1c2085752a9645490581c288e912167582a7c9"}, {"237": "886a44c047ebd285dbc71a32e573e86490821d05"}, {"259": "d75af6a0dbc54426d8604e8beef2c630f55288c4"}, {"260": "63db215c3867e8276414f0b2ef57c283a69455ca"}, {"261": "699c4cb81b52f5d344fd1003840cc79ab36c43b6"}, {"262": "699c4cb81b52f5d344fd1003840cc79ab36c43b6"}, {"263": "f4c8a84ad31f8864cd23ae142256e62cc1628c32"}, {"278": "5cb0065abc36f28c0a3d2dd5680368a4f2113b61"}, {"279": "5d9908d829bc1bfa0e64d89e9c64b1159b196eab"}, {"280": "092847d0fedbc5fd21c153b19b1bba57778d3f6b"}, {"281": "7056976a3f45a8334c0dc1ba5d84934dc5b8ef43"}, {"318": "23a5be638f3c23fa35712d669ed88cd68a36fa51"}], "ctags": [{"_type": "tag", "name": "AdminDashboard", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^const AdminDashboard = () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "admin-tab ${selectedTab === 'apps' ? 'active' : ''}", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^          className={`admin-tab ${selectedTab === 'apps' ? 'active' : ''}`}$/", "language": "JavaScript", "kind": "field", "scope": "className", "scopeKind": "class"}, {"_type": "tag", "name": "blob", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^    const blob = new Blob([csvContent], { type: 'text\\/csv;charset=utf-8;' });$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^    const content = top10Apps.map(app => $/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "copyToClipboard", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^  const copyToClipboard = () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "csvContent", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^    const csvContent = [$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "csvHeader", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^    const csvHeader = ['Rank', 'App Name', 'App Link', 'Username', 'Email', 'Registration Number/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "csvRows", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^    const csvRows = apps.map(app => [$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "exportToCsv", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^  const exportToCsv = () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "fetchApps", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^  const fetchApps = async (weekId = selectedWeekId) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "generateShareableLink", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^  const generateShareableLink = () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "getCurrentWeekStatus", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^  const getCurrentWeekStatus = () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "handleSelectWinner", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^  const handleSelectWinner = async (appId, position) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "handleStatusChange", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^  const handleStatusChange = async (weekId, newStatus) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "handleWeekChange", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^  const handleWeekChange = (weekId) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "link", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^    const link = document.createElement('a');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "processedApps", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^      const processedApps = appsData.map(app => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "profilesMap", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^      const profilesMap = {};$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "query", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^      let query = supabase$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "setApps", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^  const [apps, setApps] = useState([]);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setLoading", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^  const [loading, setLoading] = useState(true);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setSelectedTab", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^  const [selectedTab, setSelectedTab] = useState('apps');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setSelectedWeekId", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^  const [selectedWeekId, setSelectedWeekId] = useState(null);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setShareUrl", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^  const [shareUrl, setShareUrl] = useState('');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setShowShareModal", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^  const [showShareModal, setShowShareModal] = useState(false);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "shareText", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^    const shareText = `\ud83d\udcf1 Top 10 Apps from AppVote Portal \ud83d\udcf1\\\\n\\\\n${content}\\\\n\\\\nShared fro/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "success", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^    const success = await updateContestStatus(weekId, newStatus);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "top10Apps", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^    const top10Apps = apps.slice(0, 10);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^    const url = URL.createObjectURL(blob);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "userIds", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^      const userIds = appsData.map(app => app.user_id);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "week", "path": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "pattern": "/^    const week = contestWeeks.find(w => w.id === selectedWeekId);$/", "language": "JavaScript", "kind": "constant"}], "filename": "/home/kavia/workspace/code-generation/appvote-portal-89970-89978/appvote_portal/src/pages/AdminDashboard.js", "hash": "81a72dd338dd20f4ebf291305517d095", "format-version": 4, "code-base-name": "default", "fields": [{"name": "className={`admin-tab ${selectedTab === 'apps' ? 'active' : ''}`}", "scope": "className", "scopeKind": "class", "description": "unavailable"}, {"name": "let query = supabase", "scope": "", "scopeKind": "", "description": "unavailable"}]}